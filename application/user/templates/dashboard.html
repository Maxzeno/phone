{% extends 'base_user.html'%}

{% block title %}Dashboard{% endblock %}

{% block style %} 
<style>
  .filter-btn{
    background-color: #f8f9fa;
  }

  .filter-btn:hover{
    background-color: #6c757d;
  }
</style>
{% endblock %}
{% block icon %}<a href="#" class="emma-a-light"><i class="bi bi-filter-left me-2 d-md-none" id="filterIcon" style="font-size: 1.3em; line-height: 0; cursor: pointer;"></i></a>{% endblock %}
{% block container_fluid %}none{% endblock %}

{% block body %}
<div class="d-none px-3 mb-2" id="filters" style="background-color: rgb(26, 29, 32, 0.2)">
  <div class="text-end"><a class="emma-a" href="#">Filters</a></div>
</div>
<div class="container-fluid">
 <div class="row pt-md-5 pt-3">

      <div class="col-lg-3 mt-3 col-md-4 d-none d-md-block">
        <div class="bg-white rounded shadow-sm px-3 py-3">
          <div class="fs-3 border-bottom ">Filters</div>
          <div class="py-3 border-bottom">
          <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-secondary" type="submit"><i class="bi bi-search"></i></button>
              </form>
          </div>
          <div class="py-3 border-bottom">
            <div class="fw-bold text-black-50 mb-1">Brand</div>
            <span class="px-1 py-1 rounded bg-lights text-black-50 filter-btn" style="cursor: pointer;">Infinix</span>
            <span class="px-1 py-1 rounded bg-lights text-black-50 filter-btn" style="cursor: pointer;">Tecno</span>
            <span class="px-1 py-1 rounded bg-lights text-black-50 filter-btn" style="cursor: pointer;">Itel</span>
          </div>
        </div>
      </div> 

      <div class="col-lg-9 col-md-8">

        <div class="fs-2 pb-3">Explore</div>

        <div class="row">
          {% for phone in phones %}
           <div class="col-xl-6">
          <div class="border mb-3 rounded shadow-sm text-dark bg-white">
            <div class="row">
              <div class="col-sm-4">
              <div class="d-none d-sm-block border-end h-100" style="background-color: #f8f8f8">
                <a href="#" class="emma-a"><img class="img-fluid mx-auto d-block" style="max-height: 170px;max-width: 170px" src="{{ url_for('static', filename='img/jhjkkj.jpg') }}"></a>
              </div>
              <div class="d-sm-none border-bottom shadow-sm h-100" style="background-color: #f8f8f8">
                <a href="#" class="emma-a"><img class="img-fluid mx-auto d-block" style="max-height: 170px;max-width: 170px" src="{{ url_for('static', filename='img/jhjkkj.jpg') }}"></a>
              </div>
              </div>
              <div class="col-sm-8">
              <div class="pe-3 ps-sm-0 ps-3 py-3">
                <div class="row">
                <div class="fw-normal col-6">$<span style="font-size: 1.2rem;">10000</span></div>

                <div class="text-end col-6">
                  <button class="btn btn-sm btn-success add-cart" id="{{ phone.id }}">Add to Cart</button>
                </div>
                </div>
                <div class="mt-3 mb-2">
                  <a href="#" class="fw-normal emma-a" style="font-size: 1.15rem">{{ phone.description }}
                  </a>
                </div>
              </div>
              </div>
            </div>
          </div>
          </div>
          {% endfor %}

          </div>
</div>
</div>

<div class="text-end pb-5">
<div class="btn-group">
  {% if pages > 1 %}
   {% for i in range(1, pages+1) %}
        <a href="/?page={{i}}" class="btn btn-sm btn-dark {% if i == active_page %}active{% endif %}" type="button" style="box-shadow: none;">{{ i }}</a>
        {% endfor %}
  {% endif %}
</div>
</div>
</div>

<div class="text-end pb-5">
<div class="btn-group">
  {% if pages > 1 %}
   {% for i in range(1, pages+1) %}
        <a href="/dashboard?page={{i}}" class="btn btn-sm btn-dark {% if i == active_page %}active{% endif %}" type="button" style="box-shadow: none;">{{ i }}</a>
        {% endfor %}
  {% endif %}
</div>
</div>


{% endblock %}







{% block script %} 
 
<script>
 
function filtersAprear() {
  let filters = document.querySelector('#filters');
  if (filters.className.search('d-md-none') != -1){
    filters.setAttribute('class','d-none px-3 mb-2');
  }else if (filters.className.search('d-none') != -1){
    filters.setAttribute('class','d-md-none px-3 mb-2');
  }
}

document.querySelector('#filterIcon').addEventListener('click', filtersAprear);


// document.querySelector('div').addEventListener('click', e =>{

//   fetch("http://127.0.0.1:5000/test-post",
//   {method:'POST',
//   body:{name:'emma'}})  
// .then(response => response.json())     
// .then(json => console.log(json)); 


document.querySelectorAll('.add-cart').forEach(item => {
  item.addEventListener('click', e => {
    fetch("http://127.0.0.1:5000/test-post",
  {method:'POST',
  body:{name:e.id}})  
.then(response => response.json())     
.then(json => console.log(json)); 
e.preventDefault()
  })
})


// $(function(){
//     $('.add-cart').click(function(e){
//         console.log(e.id)
//         e.preventDefault();
//     });
// });
   


</script>

{% endblock %}
